"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const failHandle = (err) => {
    switch (err.data.code) {
        case 400:
            wx.hideToast();
            wx.showToast({
                title: err.data.message || '请求失败',
                icon: "none",
                duration: 2000
            });
            break;
        case 401:
            wx.hideToast();
            wx.redirectTo({ url: '/pages/login/login' });
            break;
        default:
            wx.showToast({
                title: '请求失败',
                icon: "none",
                duration: 2000
            });
            wx.hideToast();
            break;
    }
};
const successHandle = (res) => {
    switch (res.data.code) {
        case 200:
            wx.hideToast();
            break;
        case 400:
            wx.hideToast();
            wx.showToast({
                title: res.data.message || '请求成功',
                icon: "none",
                duration: 2000
            });
            break;
        case 401:
            wx.hideToast();
            wx.redirectTo({ url: '/pages/login/login' });
            break;
        default:
            wx.hideToast();
            break;
    }
};
class API {
    constructor() {
        this.HOST = 'https://api.021xzy.com';
    }
    http(URL, type, option, authority) {
        let token = wx.getStorageSync('token');
        let _data = option.data || {};
        let _header = option.data || {};
        if (authority === 'authority') {
            _header = Object.assign({ Token: token }, _header);
        }
        wx.showToast({
            title: "加载中",
            icon: 'loading',
            duration: 9999
        });
        return new Promise((resolve, reject) => {
            wx.request({
                url: this.HOST + URL,
                method: type,
                data: _data,
                timeout: 5000,
                header: Object.assign({ 'content-type': 'application/json', 'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization', 'Access-Control-Allow-Method': 'GET, POST, OPTIONS', 'Access-Control-Allow-Origin': "*" }, _header),
                complete(e) {
                    if (e.statusCode === 200 && e.data.code === 200) {
                        successHandle(e);
                        resolve(e);
                    }
                    else {
                        failHandle(e);
                        reject(e);
                    }
                }
            });
        });
    }
    typeHandle(type) {
        let typeNumber;
        switch (type) {
            case 'community':
                typeNumber = 5;
                break;
            case 'village':
                typeNumber = 8;
                break;
            case 'unit':
                typeNumber = 6;
                break;
            case 'street':
                typeNumber = 7;
                break;
            default:
                typeNumber = 0;
                break;
        }
        return typeNumber;
    }
    getDate() {
        return new Date().toISOString().split('T')[0];
    }
    checkToken() {
        this.http(`/backend/api/checkToken`, 'GET', {}, 'authority');
    }
    login(username, password) {
        return this.http('/backend/api/login', "POST", { data: { user_name: username, pwd: password, type: 1 } });
    }
    getUnit(committee_id) {
        let data = committee_id ? { committee_ids: committee_id + '' } : {};
        return this.http(`/backend/api/checkArea`, "GET", { data: Object.assign({ type: 6 }, data) }, 'authority');
    }
    getStreet(name) {
        let data = name ? { name } : {};
        return this.http(`/backend/api/streetRoadList`, "GET", { data: Object.assign({}, data) }, 'authority');
    }
    getCommitte(committee_ids) {
        let id_string = '';
        let data = {};
        if (committee_ids) {
            committee_ids.forEach((e, i) => {
                if (i === 0) {
                    id_string = e + '';
                }
                else {
                    id_string = id_string + ',' + e;
                }
            });
        }
        if (id_string) {
            data = { committee_ids: id_string };
        }
        return this.http(`/backend/api/checkArea`, "GET", { data: Object.assign({ type: 4 }, data) }, 'authority');
    }
    getVillageCommitte(committee_ids) {
        let id_string = '';
        let data = {};
        if (committee_ids) {
            committee_ids.forEach((e, i) => {
                if (i === 0) {
                    id_string = e + '';
                }
                else {
                    id_string = id_string + ',' + e;
                }
            });
        }
        if (id_string) {
            data = { committee_ids: id_string };
        }
        return this.http(`/backend/api/checkArea`, "GET", { data: Object.assign({ type: 8 }, data) }, 'authority');
    }
    getComunity(committee_ids, subdistrict_id) {
        let id_string = '';
        committee_ids.forEach((e, i) => {
            if (i === 0) {
                id_string = e;
            }
            else {
                id_string = id_string + ',' + e;
            }
        });
        let data = {};
        data = subdistrict_id ? { subdistrict_id: subdistrict_id + '' } : {};
        return this.http(`/backend/api/checkArea`, "GET", { data: Object.assign({ type: 5, committee_ids: id_string }, data) }, 'authority');
    }
    getVillage(committee_ids, subdistrict_id) {
        let id_string = '';
        committee_ids.forEach((e, i) => {
            if (i === 0) {
                id_string = e;
            }
            else {
                id_string = id_string + ',' + e;
            }
        });
        let data = {};
        data = subdistrict_id ? { subdistrict_id: subdistrict_id + '' } : {};
        return this.http(`/backend/api/checkArea`, "GET", { data: Object.assign({ type: 5, committee_ids: id_string }, data) }, 'authority');
    }
    searchComunity(name) {
        return this.http(`/backend/api/checkArea`, "GET", { data: { type: 5, name: encodeURI(name) } }, 'authority');
    }
    searchVillage(name) {
        return this.http(`/backend/api/checkArea`, "GET", { data: { type: 5, name: encodeURI(name) } }, 'authority');
    }
    searchUnit(name) {
        return this.http(`/backend/api/checkArea`, "GET", { data: { type: 6, name: encodeURI(name) } }, 'authority');
    }
    getComunityPenalties(subdistrict_id) {
        return this.http('/backend/api/deductPointsConfig', "GET", { data: { type: 5, subdistrict_id } }, 'authority');
    }
    getVillagePenalties(subdistrict_id) {
        return this.http('/backend/api/deductPointsConfig', "GET", { data: { type: 8, subdistrict_id } }, 'authority');
    }
    getStreetPenalties() {
        return this.http('/backend/api/deductPointsConfig', "GET", { data: { type: 7 } }, 'authority');
    }
    getUnitPenalties(committee_id) {
        return this.http('/backend/api/deductPointsConfig', "GET", { data: { type: 6, committee_id } }, 'authority');
    }
    saveCurrentPenalties(patrolData) {
        return new Promise((resolve) => {
            wx.setStorageSync('patrolData_' + patrolData.type, patrolData);
            resolve(true);
        });
    }
    getCurrentPenalties(type) {
        return new Promise((resolve) => {
            resolve(wx.getStorageSync('patrolData_' + type));
        });
    }
    upDecutComunity(data) {
        return this.http('/backend/api/deductPointsAction', "POST", { data: Object.assign({}, data, { type: 5 }) }, 'authority');
    }
    upDecutVillage(data) {
        return this.http('/backend/api/deductPointsAction', "POST", { data: Object.assign({}, data, { type: 8 }) }, 'authority');
    }
    upDecutUnit(data) {
        return this.http('/backend/api/deductPointsAction', "POST", { data: Object.assign({}, data, { type: 6 }) }, 'authority');
    }
    uploadFile(tempUrl) {
        return new Promise((resolve, reject) => {
            if (tempUrl.indexOf('https://img.hxjbcdn.com') > -1) {
                let data = {
                    data: JSON.stringify({ resultList: [{ access_url: tempUrl }] })
                };
                resolve(data);
                return;
            }
            wx.uploadFile({
                url: 'https://api.51jiabo.com/file/v2.0/uploadImage',
                filePath: tempUrl,
                name: 'file',
                timeout: 5000,
                header: {
                    'Token': wx.getStorageSync('token'),
                    'content-type': 'multipart/form-data',
                    'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization',
                    'Access-Control-Allow-Method': 'GET, POST, OPTIONS',
                    'Access-Control-Allow-Origin': "*",
                },
                success(res) {
                    successHandle(res);
                    resolve(res);
                },
                fail(e) {
                    wx.showToast({
                        title: "上传图片失败",
                        icon: 'none',
                        duration: 2000
                    });
                    reject(e);
                }
            });
        });
    }
    uploadImgs(images) {
        return new Promise((resolve, reject) => {
            let index = 0;
            let last = images.length - 1;
            let picarr = [];
            wx.showLoading({ title: '上传中' });
            let up = () => {
                if (index <= last) {
                    this.uploadFile(images[index].url || images[index]).then((res) => {
                        picarr.push(JSON.parse(res.data).resultList[0].access_url);
                        index = index + 1;
                        up();
                    }, (err) => {
                        wx.hideLoading();
                        reject(err);
                    });
                }
                else {
                    wx.hideLoading();
                    resolve(picarr);
                }
            };
            up();
        });
    }
    getRecord(type) {
        let type2 = 0;
        type2 = this.typeHandle(type);
        return this.http(`/backend/api/UserPatrolList`, 'GET', { data: { type: type2 } }, "authority");
    }
    setPatrolType(type) {
        wx.setStorageSync('patrolType', type);
    }
    setRecordData(data) {
        wx.setStorageSync('recordData', data);
    }
    getAnalysisData(type) {
        let typeNumber = 0;
        typeNumber = this.typeHandle(type);
        return this.http('/backend/api/analysisData', "GET", { data: { type: typeNumber } }, 'authority');
    }
    setFeedbackType(type) {
        wx.setStorageSync('feedbackType', type);
    }
    getFeedbackList(upData) {
        let typeNumber = 0;
        let statusCode = 0;
        typeNumber = this.typeHandle(upData.type);
        switch (upData.status) {
            case 'all':
                statusCode = '';
                break;
            case 'pending':
                statusCode = 2;
                break;
            case 'notyet':
                statusCode = -1;
                break;
            case 'done':
                statusCode = 1;
                break;
            default:
                break;
        }
        upData.type = typeNumber;
        upData.pageSize = 10;
        upData.status = statusCode;
        console.log(upData);
        return this.http(`/backend/api/analysisList`, 'GET', { data: upData }, 'authority');
    }
    upFeedback(data) {
        return this.http('/backend/api/doActionFeedback', 'POST', { data: data }, 'authority');
    }
    newActivity(data) {
        return this.http(`/backend/api/activity/create`, 'POST', { data: data }, 'authority');
    }
    getSummary(type, page, size) {
        let typenumber = this.typeHandle(type);
        return this.http('/backend/xcx/questionRanking', 'GET', { data: { type: typenumber, page: page, pageSize: size } }, 'authority');
    }
    rectification(type) {
        let typenumber = this.typeHandle(type);
        return this.http('/backend/xcx/rectification', 'GET', { data: { type: typenumber } }, 'authority');
    }
    getRate(type) {
        let typenumber = this.typeHandle(type);
        return this.http('/backend/xcx/yield', 'GET', { data: { type: typenumber } }, 'authority');
    }
}
const api = new API;
exports.default = api;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmV0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJuZXQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLE1BQU0sVUFBVSxHQUFHLENBQUMsR0FBUSxFQUFFLEVBQUU7SUFDOUIsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtRQUNyQixLQUFLLEdBQUc7WUFDTixFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDZixFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNYLEtBQUssRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxNQUFNO2dCQUNqQyxJQUFJLEVBQUUsTUFBTTtnQkFDWixRQUFRLEVBQUUsSUFBSTthQUNmLENBQUMsQ0FBQTtZQUNGLE1BQU07UUFDUixLQUFLLEdBQUc7WUFDTixFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDZixFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxFQUFFLG9CQUFvQixFQUFFLENBQUMsQ0FBQTtZQUM1QyxNQUFNO1FBQ1I7WUFDRSxFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNYLEtBQUssRUFBRSxNQUFNO2dCQUNiLElBQUksRUFBRSxNQUFNO2dCQUNaLFFBQVEsRUFBRSxJQUFJO2FBQ2YsQ0FBQyxDQUFBO1lBQ0YsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ2YsTUFBTTtLQUNUO0FBQ0gsQ0FBQyxDQUFDO0FBQ0YsTUFBTSxhQUFhLEdBQUcsQ0FBQyxHQUFRLEVBQUUsRUFBRTtJQUNqQyxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO1FBQ3JCLEtBQUssR0FBRztZQUNOLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNmLE1BQU07UUFDUixLQUFLLEdBQUc7WUFDTixFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDZixFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNYLEtBQUssRUFBRSxHQUFHLENBQUMsSUFB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TSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUE7QUFDbkIsa0JBQWUsR0FBRyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gY29uc3QgYXBpOmFueSA9IHt9O1xyXG5cclxuY29uc3QgZmFpbEhhbmRsZSA9IChlcnI6IGFueSkgPT4ge1xyXG4gIHN3aXRjaCAoZXJyLmRhdGEuY29kZSkge1xyXG4gICAgY2FzZSA0MDA6XHJcbiAgICAgIHd4LmhpZGVUb2FzdCgpO1xyXG4gICAgICB3eC5zaG93VG9hc3Qoe1xyXG4gICAgICAgIHRpdGxlOiBlcnIuZGF0YS5tZXNzYWdlIHx8ICfor7fmsYLlpLHotKUnLFxyXG4gICAgICAgIGljb246IFwibm9uZVwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiAyMDAwXHJcbiAgICAgIH0pXHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSA0MDE6XHJcbiAgICAgIHd4LmhpZGVUb2FzdCgpO1xyXG4gICAgICB3eC5yZWRpcmVjdFRvKHsgdXJsOiAnL3BhZ2VzL2xvZ2luL2xvZ2luJyB9KVxyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgdGl0bGU6ICfor7fmsYLlpLHotKUnLFxyXG4gICAgICAgIGljb246IFwibm9uZVwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiAyMDAwXHJcbiAgICAgIH0pXHJcbiAgICAgIHd4LmhpZGVUb2FzdCgpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn07XHJcbmNvbnN0IHN1Y2Nlc3NIYW5kbGUgPSAocmVzOiBhbnkpID0+IHtcclxuICBzd2l0Y2ggKHJlcy5kYXRhLmNvZGUpIHtcclxuICAgIGNhc2UgMjAwOlxyXG4gICAgICB3eC5oaWRlVG9hc3QoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDQwMDpcclxuICAgICAgd3guaGlkZVRvYXN0KCk7XHJcbiAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgdGl0bGU6IHJlcy5kYXRhLm1lc3NhZ2UgfHwgJ+ivt+axguaIkOWKnycsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDQwMTpcclxuICAgICAgd3guaGlkZVRvYXN0KCk7XHJcbiAgICAgIHd4LnJlZGlyZWN0VG8oeyB1cmw6ICcvcGFnZXMvbG9naW4vbG9naW4nIH0pXHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgd3guaGlkZVRvYXN0KCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG5pbnRlcmZhY2UgcGF0cm9sRGF0YSB7XHJcbiAgdHlwZTogbWFpblR5cGUsXHJcbiAgY29tbWl0dGVlPzogW2FueV0sXHJcbiAgdW5pdD86IFthbnldLFxyXG4gIGNvbW11bml0eT86IFthbnldLFxyXG4gIHZpbGxhZ2U/OiBbYW55XSxcclxuICBwZW5hbHRpZXM6IGFueSxcclxuICBzX3VuaXQ/OiBhbnksXHJcbiAgc19jb21taXR0ZWU/OiBhbnksXHJcbiAgc19jb21tdW5pdHk/OiBhbnlcclxuICBzX3ZpbGxhZ2U/OiBhbnlcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgbWFpblR5cGUgPSBcImNvbW11bml0eVwiIHwgXCJzdHJlZXRcIiB8IFwidW5pdFwiIHwgXCJ2aWxsYWdlXCIgfCBOdW1iZXI7XHJcblxyXG5jbGFzcyBBUEkge1xyXG4gIC8vIHByaXZhdGUgSE9TVCA9ICdodHRwczovL3RpY2tldC1hcGkuamlhLWV4cG8uY29tJzsgLy8g5rWL6K+V546v5aKDXHJcbiAgcHJpdmF0ZSBIT1NUID0gJ2h0dHBzOi8vYXBpLjAyMXh6eS5jb20nIC8vIOato+W8j+eOr+Wig1xyXG4gIHByaXZhdGUgaHR0cChVUkw6IHN0cmluZywgdHlwZTogXCJPUFRJT05TXCIgfCBcIkdFVFwiIHwgXCJIRUFEXCIgfCBcIlBPU1RcIiB8IFwiUFVUXCIgfCBcIkRFTEVURVwiIHwgXCJUUkFDRVwiIHwgXCJDT05ORUNUXCIgfCB1bmRlZmluZWQsIG9wdGlvbjogeyBkYXRhPzogYW55LCBoZWFkZXI/OiBhbnkgfSwgYXV0aG9yaXR5PzogJ2F1dGhvcml0eScpIHtcclxuICAgIGxldCB0b2tlbiA9IHd4LmdldFN0b3JhZ2VTeW5jKCd0b2tlbicpXHJcbiAgICBsZXQgX2RhdGE6IGFueSA9IG9wdGlvbi5kYXRhIHx8IHt9O1xyXG4gICAgbGV0IF9oZWFkZXI6IGFueSA9IG9wdGlvbi5kYXRhIHx8IHt9O1xyXG4gICAgaWYgKGF1dGhvcml0eSA9PT0gJ2F1dGhvcml0eScpIHtcclxuICAgICAgX2hlYWRlciA9IHsgVG9rZW46IHRva2VuLCAuLi5faGVhZGVyIH1cclxuICAgIH1cclxuICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgIHRpdGxlOiBcIuWKoOi9veS4rVwiLFxyXG4gICAgICBpY29uOiAnbG9hZGluZycsXHJcbiAgICAgIGR1cmF0aW9uOiA5OTk5XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgd3gucmVxdWVzdCh7XHJcbiAgICAgICAgdXJsOiB0aGlzLkhPU1QgKyBVUkwsXHJcbiAgICAgICAgbWV0aG9kOiB0eXBlLFxyXG4gICAgICAgIGRhdGE6IF9kYXRhLFxyXG4gICAgICAgIHRpbWVvdXQ6IDUwMDAsXHJcbiAgICAgICAgaGVhZGVyOiB7XHJcbiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCwgQXV0aG9yaXphdGlvbicsXHJcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogXCIqXCIsXHJcbiAgICAgICAgICAuLi5faGVhZGVyXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wbGV0ZShlOiBhbnkpIHtcclxuICAgICAgICAgIGlmIChlLnN0YXR1c0NvZGUgPT09IDIwMCAmJiBlLmRhdGEuY29kZSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGUoZSk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmYWlsSGFuZGxlKGUpO1xyXG4gICAgICAgICAgICByZWplY3QoZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuICBwcml2YXRlIHR5cGVIYW5kbGUodHlwZT86IG1haW5UeXBlfHN0cmluZykge1xyXG4gICAgbGV0IHR5cGVOdW1iZXJcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdjb21tdW5pdHknOlxyXG4gICAgICAgIHR5cGVOdW1iZXIgPSA1XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3ZpbGxhZ2UnOlxyXG4gICAgICAgIHR5cGVOdW1iZXIgPSA4XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3VuaXQnOlxyXG4gICAgICAgIHR5cGVOdW1iZXIgPSA2XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3N0cmVldCc6XHJcbiAgICAgICAgdHlwZU51bWJlciA9IDdcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0eXBlTnVtYmVyID0gMDtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiB0eXBlTnVtYmVyXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGdldERhdGVcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0RGF0ZSgpIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxyXG4gIH1cclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG4gIGNoZWNrVG9rZW4oKSB7XHJcbiAgICB0aGlzLmh0dHAoYC9iYWNrZW5kL2FwaS9jaGVja1Rva2VuYCwgJ0dFVCcsIHt9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgbG9naW4odXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cCgnL2JhY2tlbmQvYXBpL2xvZ2luJywgXCJQT1NUXCIsIHsgZGF0YTogeyB1c2VyX25hbWU6IHVzZXJuYW1lLCBwd2Q6IHBhc3N3b3JkLCB0eXBlOiAxIH0gfSlcclxuICB9XHJcbiAgLyoqXHJcbiAqIGdldFVuaXRcclxuICog6I635Y+W5Y2V5L2NXHJcbiAqL1xyXG4gIHB1YmxpYyBnZXRVbml0KGNvbW1pdHRlZV9pZD86IG51bWJlciB8IHN0cmluZykge1xyXG4gICAgbGV0IGRhdGEgPSBjb21taXR0ZWVfaWQgPyB7IGNvbW1pdHRlZV9pZHM6IGNvbW1pdHRlZV9pZCArICcnIH0gOiB7fVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cChgL2JhY2tlbmQvYXBpL2NoZWNrQXJlYWAsIFwiR0VUXCIsIHsgZGF0YTogeyB0eXBlOiA2LCAuLi5kYXRhIH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGdldFN0cmVldFxyXG4gICAqIOiOt+WPluihl+mBk+W3oeafpeWIl+ihqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTdHJlZXQobmFtZT86IHN0cmluZykge1xyXG4gICAgbGV0IGRhdGEgPSBuYW1lID8geyBuYW1lIH0gOiB7fVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cChgL2JhY2tlbmQvYXBpL3N0cmVldFJvYWRMaXN0YCwgXCJHRVRcIiwgeyBkYXRhOiB7IC4uLmRhdGEgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLy8g6I635Y+W5bGF5aeUXHJcbiAgZ2V0Q29tbWl0dGUoY29tbWl0dGVlX2lkcz86IFtzdHJpbmcgfCBudW1iZXJdKSB7XHJcbiAgICBsZXQgaWRfc3RyaW5nID0gJydcclxuICAgIGxldCBkYXRhID0ge31cclxuICAgIGlmIChjb21taXR0ZWVfaWRzKSB7XHJcbiAgICAgIGNvbW1pdHRlZV9pZHMuZm9yRWFjaCgoZSwgaSkgPT4ge1xyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICBpZF9zdHJpbmcgPSBlICsgJydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWRfc3RyaW5nID0gaWRfc3RyaW5nICsgJywnICsgZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmIChpZF9zdHJpbmcpIHtcclxuICAgICAgZGF0YSA9IHsgY29tbWl0dGVlX2lkczogaWRfc3RyaW5nIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwKGAvYmFja2VuZC9hcGkvY2hlY2tBcmVhYCwgXCJHRVRcIiwgeyBkYXRhOiB7IHR5cGU6IDQsIC4uLmRhdGEgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W5p2R5aeUXHJcbiAgICovXHJcbiAgZ2V0VmlsbGFnZUNvbW1pdHRlKGNvbW1pdHRlZV9pZHM/OiBbc3RyaW5nIHwgbnVtYmVyXSkge1xyXG4gICAgbGV0IGlkX3N0cmluZyA9ICcnXHJcbiAgICBsZXQgZGF0YSA9IHt9XHJcbiAgICBpZiAoY29tbWl0dGVlX2lkcykge1xyXG4gICAgICBjb21taXR0ZWVfaWRzLmZvckVhY2goKGUsIGkpID0+IHtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgaWRfc3RyaW5nID0gZSArICcnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlkX3N0cmluZyA9IGlkX3N0cmluZyArICcsJyArIGVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoaWRfc3RyaW5nKSB7XHJcbiAgICAgIGRhdGEgPSB7IGNvbW1pdHRlZV9pZHM6IGlkX3N0cmluZyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKGAvYmFja2VuZC9hcGkvY2hlY2tBcmVhYCwgXCJHRVRcIiwgeyBkYXRhOiB7IHR5cGU6IDgsIC4uLmRhdGEgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgZ2V0Q29tdW5pdHkoY29tbWl0dGVlX2lkczogW3N0cmluZ10sIHN1YmRpc3RyaWN0X2lkPzogbnVtYmVyIHwgc3RyaW5nKSB7XHJcbiAgICAvLyDojrflj5blsI/ljLpcclxuICAgIGxldCBpZF9zdHJpbmcgPSAnJ1xyXG4gICAgY29tbWl0dGVlX2lkcy5mb3JFYWNoKChlLCBpKSA9PiB7XHJcbiAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgaWRfc3RyaW5nID0gZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlkX3N0cmluZyA9IGlkX3N0cmluZyArICcsJyArIGVcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIGxldCBkYXRhID0ge31cclxuICAgIGRhdGEgPSBzdWJkaXN0cmljdF9pZCA/IHsgc3ViZGlzdHJpY3RfaWQ6IHN1YmRpc3RyaWN0X2lkICsgJycgfSA6IHt9XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKGAvYmFja2VuZC9hcGkvY2hlY2tBcmVhYCwgXCJHRVRcIiwgeyBkYXRhOiB7IHR5cGU6IDUsIGNvbW1pdHRlZV9pZHM6IGlkX3N0cmluZywgLi4uZGF0YSB9IH0sICdhdXRob3JpdHknKVxyXG4gIH1cclxuICBnZXRWaWxsYWdlKGNvbW1pdHRlZV9pZHM6IFtzdHJpbmddLCBzdWJkaXN0cmljdF9pZD86IG51bWJlciB8IHN0cmluZykge1xyXG4gICAgLy8g6I635Y+W5bCP5Yy6XHJcbiAgICBsZXQgaWRfc3RyaW5nID0gJydcclxuICAgIGNvbW1pdHRlZV9pZHMuZm9yRWFjaCgoZSwgaSkgPT4ge1xyXG4gICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgIGlkX3N0cmluZyA9IGVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZF9zdHJpbmcgPSBpZF9zdHJpbmcgKyAnLCcgKyBlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBsZXQgZGF0YSA9IHt9XHJcbiAgICBkYXRhID0gc3ViZGlzdHJpY3RfaWQgPyB7IHN1YmRpc3RyaWN0X2lkOiBzdWJkaXN0cmljdF9pZCArICcnIH0gOiB7fVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cChgL2JhY2tlbmQvYXBpL2NoZWNrQXJlYWAsIFwiR0VUXCIsIHsgZGF0YTogeyB0eXBlOiA1LCBjb21taXR0ZWVfaWRzOiBpZF9zdHJpbmcsIC4uLmRhdGEgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLy8g5pCc57Si5bCP5Yy6XHJcbiAgc2VhcmNoQ29tdW5pdHkobmFtZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKGAvYmFja2VuZC9hcGkvY2hlY2tBcmVhYCwgXCJHRVRcIiwgeyBkYXRhOiB7IHR5cGU6IDUsIG5hbWU6IGVuY29kZVVSSShuYW1lKSB9IH0sICdhdXRob3JpdHknKVxyXG4gIH1cclxuXHJcbiAgLy8g5pCc57Si6KGM5pS/5p2RXHJcbiAgc2VhcmNoVmlsbGFnZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAoYC9iYWNrZW5kL2FwaS9jaGVja0FyZWFgLCBcIkdFVFwiLCB7IGRhdGE6IHsgdHlwZTogNSwgbmFtZTogZW5jb2RlVVJJKG5hbWUpIH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIHNlYXJjaFVuaXRcclxuICAgKiDmkJzntKLljZXkvY1cclxuICAgKi9cclxuICBwdWJsaWMgc2VhcmNoVW5pdChuYW1lOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAoYC9iYWNrZW5kL2FwaS9jaGVja0FyZWFgLCBcIkdFVFwiLCB7IGRhdGE6IHsgdHlwZTogNiwgbmFtZTogZW5jb2RlVVJJKG5hbWUpIH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGdldFBlbmFsdGllc1xyXG4gICAqIOiOt+WPluWwj+WMuuaJo+WIhumhuVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDb211bml0eVBlbmFsdGllcyhzdWJkaXN0cmljdF9pZDogbnVtYmVyIHwgc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKCcvYmFja2VuZC9hcGkvZGVkdWN0UG9pbnRzQ29uZmlnJywgXCJHRVRcIiwgeyBkYXRhOiB7IHR5cGU6IDUsIHN1YmRpc3RyaWN0X2lkIH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gKiBnZXRQZW5hbHRpZXNcclxuICog6I635Y+W6KGM5pS/5p2R5omj5YiG6aG5XHJcbiAqL1xyXG4gIHB1YmxpYyBnZXRWaWxsYWdlUGVuYWx0aWVzKHN1YmRpc3RyaWN0X2lkOiBudW1iZXIgfCBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAoJy9iYWNrZW5kL2FwaS9kZWR1Y3RQb2ludHNDb25maWcnLCBcIkdFVFwiLCB7IGRhdGE6IHsgdHlwZTogOCwgc3ViZGlzdHJpY3RfaWQgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLyoqXHJcbiAgICogZ2V0U3RyZWV0UGVuYWx0aWVzXHJcbiAgICog6I635Y+W5rK/6KGX6KGX6YGT5omj5YiG6aG5XHJcbiAgICovXHJcbiAgcHVibGljIGdldFN0cmVldFBlbmFsdGllcygpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAoJy9iYWNrZW5kL2FwaS9kZWR1Y3RQb2ludHNDb25maWcnLCBcIkdFVFwiLCB7IGRhdGE6IHsgdHlwZTogNyB9IH0sICdhdXRob3JpdHknKVxyXG4gIH1cclxuICAvKipcclxuICAgKiBnZXRVbml0UGVuYWx0aWVzXHJcbiAgICog6I635Y+W5Y2V5L2N6YGT5omj5YiG6aG5XHJcbiAgICovXHJcbiAgcHVibGljIGdldFVuaXRQZW5hbHRpZXMoY29tbWl0dGVlX2lkOiBudW1iZXIgfCBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAoJy9iYWNrZW5kL2FwaS9kZWR1Y3RQb2ludHNDb25maWcnLCBcIkdFVFwiLCB7IGRhdGE6IHsgdHlwZTogNiwgY29tbWl0dGVlX2lkIH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzYXZlQ3VycmVudFBlbmFsdGllc1xyXG4gICAqIOS/neWtmOW9k+WJjeato+WcqOW3oeafpeeahOmhtemdoue8k+WtmFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzYXZlQ3VycmVudFBlbmFsdGllcyhwYXRyb2xEYXRhOiBwYXRyb2xEYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgd3guc2V0U3RvcmFnZVN5bmMoJ3BhdHJvbERhdGFfJyArIHBhdHJvbERhdGEudHlwZSwgcGF0cm9sRGF0YSk7XHJcbiAgICAgIHJlc29sdmUodHJ1ZSlcclxuICAgIH0pXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGdldEN1cnJlbnRQZW5hbHRpZXNcclxuICAgKiDojrflj5blvZPliY3mraPlnKjlt6Hmn6XnmoTpobXpnaLnvJPlrZhcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q3VycmVudFBlbmFsdGllcyh0eXBlOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICByZXNvbHZlKHd4LmdldFN0b3JhZ2VTeW5jKCdwYXRyb2xEYXRhXycgKyB0eXBlKSlcclxuICAgIH0pXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIHVwRGVjdXRDb211bml0eVxyXG4gICAqIOS4iuS8oOekvuWMuuaJk+WIhlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cERlY3V0Q29tdW5pdHkoZGF0YTogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKCcvYmFja2VuZC9hcGkvZGVkdWN0UG9pbnRzQWN0aW9uJywgXCJQT1NUXCIsIHsgZGF0YTogeyAuLi5kYXRhLCB0eXBlOiA1IH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gKiB1cERlY3V0Q29tdW5pdHlcclxuICog5LiK5Lyg56S+5Yy65omT5YiGXHJcbiAqL1xyXG4gIHB1YmxpYyB1cERlY3V0VmlsbGFnZShkYXRhOiBhbnkpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAoJy9iYWNrZW5kL2FwaS9kZWR1Y3RQb2ludHNBY3Rpb24nLCBcIlBPU1RcIiwgeyBkYXRhOiB7IC4uLmRhdGEsIHR5cGU6IDggfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLyoqXHJcbiAgICogdXBEZWN1dFVuaXRcclxuICAgKiDkuIrkvKDljZXkvY3miZPliIZcclxuICAgKi9cclxuICBwdWJsaWMgdXBEZWN1dFVuaXQoZGF0YTogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKCcvYmFja2VuZC9hcGkvZGVkdWN0UG9pbnRzQWN0aW9uJywgXCJQT1NUXCIsIHsgZGF0YTogeyAuLi5kYXRhLCB0eXBlOiA2IH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIHVwbG9hZEZpbGVcclxuICAgKiDlvq7kv6HkuIrkvKDlm77niYdcclxuICAgKi9cclxuICBwdWJsaWMgdXBsb2FkRmlsZSh0ZW1wVXJsOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICh0ZW1wVXJsLmluZGV4T2YoJ2h0dHBzOi8vaW1nLmh4amJjZG4uY29tJykgPiAtMSkge1xyXG4gICAgICAgIC8vIEpTT04ucGFyc2UocmVzLmRhdGEpLnJlc3VsdExpc3RbMF0uYWNjZXNzX3VybFxyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeyByZXN1bHRMaXN0OiBbeyBhY2Nlc3NfdXJsOiB0ZW1wVXJsIH1dIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc29sdmUoZGF0YSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgd3gudXBsb2FkRmlsZSh7XHJcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkuNTFqaWFiby5jb20vZmlsZS92Mi4wL3VwbG9hZEltYWdlJywgLy/ku4XkuLrnpLrkvovvvIzpnZ7nnJ/lrp7nmoTmjqXlj6PlnLDlnYBcclxuICAgICAgICBmaWxlUGF0aDogdGVtcFVybCxcclxuICAgICAgICBuYW1lOiAnZmlsZScsXHJcbiAgICAgICAgdGltZW91dDogNTAwMCxcclxuICAgICAgICBoZWFkZXI6IHtcclxuICAgICAgICAgICdUb2tlbic6IHd4LmdldFN0b3JhZ2VTeW5jKCd0b2tlbicpLFxyXG4gICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyxcclxuICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQsIEF1dGhvcml6YXRpb24nLFxyXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZCc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6IFwiKlwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzcyhyZXMpIHtcclxuICAgICAgICAgIHN1Y2Nlc3NIYW5kbGUocmVzKTtcclxuICAgICAgICAgIHJlc29sdmUocmVzKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmFpbChlKSB7XHJcbiAgICAgICAgICB3eC5zaG93VG9hc3Qoe1xyXG4gICAgICAgICAgICB0aXRsZTogXCLkuIrkvKDlm77niYflpLHotKVcIixcclxuICAgICAgICAgICAgaWNvbjogJ25vbmUnLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMjAwMFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGxvYWRJbWdzKGltYWdlczogQXJyYXk8YW55Pikge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IGluZGV4ID0gMFxyXG4gICAgICBsZXQgbGFzdCA9IGltYWdlcy5sZW5ndGggLSAxXHJcbiAgICAgIGxldCBwaWNhcnIgPSA8YW55PltdXHJcbiAgICAgIHd4LnNob3dMb2FkaW5nKHsgdGl0bGU6ICfkuIrkvKDkuK0nIH0pXHJcbiAgICAgIGxldCB1cCA9ICgpID0+IHtcclxuICAgICAgICBpZiAoaW5kZXggPD0gbGFzdCkge1xyXG4gICAgICAgICAgdGhpcy51cGxvYWRGaWxlKGltYWdlc1tpbmRleF0udXJsIHx8IGltYWdlc1tpbmRleF0pLnRoZW4oKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHBpY2Fyci5wdXNoKEpTT04ucGFyc2UocmVzLmRhdGEpLnJlc3VsdExpc3RbMF0uYWNjZXNzX3VybClcclxuICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDFcclxuICAgICAgICAgICAgdXAoKTtcclxuICAgICAgICAgIH0sIChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB3eC5oaWRlTG9hZGluZygpXHJcbiAgICAgICAgICAgIHJlamVjdChlcnIpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB3eC5oaWRlTG9hZGluZygpXHJcbiAgICAgICAgICByZXNvbHZlKHBpY2FycilcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdXAoKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBnZXRSZWNvcmRcclxuICAgKiDojrflj5blvZPml6Xlt6Hmn6XorrDlvZVcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0UmVjb3JkKHR5cGU6IG1haW5UeXBlKSB7XHJcbiAgICBsZXQgdHlwZTI6IE51bWJlciB8IFN0cmluZyA9IDBcclxuICAgIHR5cGUyID0gdGhpcy50eXBlSGFuZGxlKHR5cGUpXHJcbiAgICByZXR1cm4gdGhpcy5odHRwKGAvYmFja2VuZC9hcGkvVXNlclBhdHJvbExpc3RgLCAnR0VUJywgeyBkYXRhOiB7IHR5cGU6IHR5cGUyIH0gfSwgXCJhdXRob3JpdHlcIilcclxuICB9XHJcbiAgLyoqXHJcbiAgICogc2V0UGF0cm9sVHlwZVxyXG4gICAqIOiuvue9rui/m+WFpeW3oeafpemhtemdoueahOe0r+W/g1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRQYXRyb2xUeXBlKHR5cGU6ICduZXcnIHwgJ3JlY29yZCcpIHtcclxuICAgIHd4LnNldFN0b3JhZ2VTeW5jKCdwYXRyb2xUeXBlJywgdHlwZSlcclxuICB9XHJcbiAgLyoqXHJcbiAgICogc2V0UmVjb3JkRGF0YVxyXG4gICAqIOiuvue9ruafpeeci+W3oeafpeiusOW9leaXtueahOS8oOmAkuaVsOaNrlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRSZWNvcmREYXRhKGRhdGE6IHsgdHlwZTogbWFpblR5cGUsIGNvbW1pdHRlZV9pZD86IG51bWJlciwgc3ViZGlzdHJpY3RfaWQ/OiBudW1iZXIgfSkge1xyXG4gICAgd3guc2V0U3RvcmFnZVN5bmMoJ3JlY29yZERhdGEnLCBkYXRhKVxyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcbiAgLy8g5ZCO5Y+wXHJcbiAgLyoqXHJcbiAgICogZ2V0QW5hbHlzaXNEYXRhXHJcbiAgICog6I635Y+W5pW05pS55pWw6YePXHJcbiAgICog5ZCO5Y+w6aaW6aG1XHJcbiAgICovXHJcbiAgcHVibGljIGdldEFuYWx5c2lzRGF0YSh0eXBlPzogbWFpblR5cGUpIHtcclxuICAgIGxldCB0eXBlTnVtYmVyOiBudW1iZXIgfCBzdHJpbmcgPSAwXHJcbiAgICB0eXBlTnVtYmVyID0gdGhpcy50eXBlSGFuZGxlKHR5cGUpXHJcbiAgICByZXR1cm4gdGhpcy5odHRwKCcvYmFja2VuZC9hcGkvYW5hbHlzaXNEYXRhJywgXCJHRVRcIiwgeyBkYXRhOiB7IHR5cGU6IHR5cGVOdW1iZXIgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgcHVibGljIHNldEZlZWRiYWNrVHlwZSh0eXBlOiBtYWluVHlwZSkge1xyXG4gICAgd3guc2V0U3RvcmFnZVN5bmMoJ2ZlZWRiYWNrVHlwZScsIHR5cGUpXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGdldEZlZWRiYWNrTGlzdFxyXG4gICAqIOiOt+WPluaVtOaUueWPjemmiOWIl+ihqFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRGZWVkYmFja0xpc3QodXBEYXRhOiB7XHJcbiAgICB0eXBlOiBtYWluVHlwZSB8IG51bWJlcixcclxuICAgIHN0YXR1czogJ2FsbCcgfCAncGVuZGluZycgfCAnbm90eWV0JyB8ICdkb25lJyB8IG51bWJlciB8IHN0cmluZyxcclxuICAgIHBhZ2U6IG51bWJlciB8IHN0cmluZyxcclxuICAgIG5hbWU/OiBzdHJpbmcsXHJcbiAgICBwYWdlU2l6ZT86IG51bWJlcixcclxuICAgIGRlZnVjdF9pZD86IG51bWJlciB8IHN0cmluZyxcclxuICAgIGNhdGVnb3J5X2lkPzogbnVtYmVyIHwgc3RyaW5nXHJcbiAgfSkge1xyXG4gICAgbGV0IHR5cGVOdW1iZXIgPSAwXHJcbiAgICBsZXQgc3RhdHVzQ29kZTogbnVtYmVyIHwgc3RyaW5nID0gMFxyXG4gICAgdHlwZU51bWJlciA9IHRoaXMudHlwZUhhbmRsZSh1cERhdGEudHlwZSlcclxuICAgIHN3aXRjaCAodXBEYXRhLnN0YXR1cykge1xyXG4gICAgICBjYXNlICdhbGwnOlxyXG4gICAgICAgIHN0YXR1c0NvZGUgPSAnJ1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdwZW5kaW5nJzpcclxuICAgICAgICBzdGF0dXNDb2RlID0gMlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdub3R5ZXQnOlxyXG4gICAgICAgIHN0YXR1c0NvZGUgPSAtMVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb25lJzpcclxuICAgICAgICBzdGF0dXNDb2RlID0gMVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdXBEYXRhLnR5cGUgPSB0eXBlTnVtYmVyXHJcbiAgICB1cERhdGEucGFnZVNpemUgPSAxMFxyXG4gICAgdXBEYXRhLnN0YXR1cyA9IHN0YXR1c0NvZGVcclxuICAgIGNvbnNvbGUubG9nKHVwRGF0YSlcclxuICAgIC8vIHBhZ2VTaXplOjEwLHR5cGU6dHlwZU51bWJlcixzdGF0dXM6c3RhdHVzQ29kZT9zdGF0dXNDb2RlOicnLHBhZ2U6ZGF0YS5wYWdlLG5hbWU6ZGF0YS5uYW1lP2RhdGEubmFtZTonJ1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cChgL2JhY2tlbmQvYXBpL2FuYWx5c2lzTGlzdGAsICdHRVQnLCB7IGRhdGE6IHVwRGF0YSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLyoqXHJcbiAgICogdXBGZWVkYmFja1xyXG4gICAqIOS4iuS8oOWPjemmiFxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cEZlZWRiYWNrKGRhdGE6IHtcclxuICAgIGZlZWRiYWNrOiBzdHJpbmcsXHJcbiAgICBpbWFnZV91cmw6IEFycmF5PHN0cmluZz4sXHJcbiAgICBjYXRlZ29yeV9pZDogbnVtYmVyIHwgc3RyaW5nLFxyXG4gICAgZGVmdWN0X2lkOiBudW1iZXIgfCBzdHJpbmcsXHJcbiAgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cCgnL2JhY2tlbmQvYXBpL2RvQWN0aW9uRmVlZGJhY2snLCAnUE9TVCcsIHsgZGF0YTogZGF0YSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcbiAgLyoqXHJcbiAgICogbmV3QWN0aXZpdHlcclxuICAgKiDliJvlu7rmtLvliqhcclxuICAgKi9cclxuICBwdWJsaWMgbmV3QWN0aXZpdHkoZGF0YToge1xyXG4gICAgdGl0bGU6IHN0cmluZyxcclxuICAgIGltYWdlX3VybDogQXJyYXk8c3RyaW5nPixcclxuICAgIGFjdGl2aXR5X3R5cGU6IG51bWJlciB8IHN0cmluZyxcclxuICAgIHN0YXJ0X3RpbWU6IHN0cmluZyxcclxuICAgIGNvbnRlbnQ6IHN0cmluZyxcclxuICB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwKGAvYmFja2VuZC9hcGkvYWN0aXZpdHkvY3JlYXRlYCwgJ1BPU1QnLCB7IGRhdGE6IGRhdGEgfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIGdldFN1bW1hcnlcclxuICAgKiDojrflj5bpl67popjmsYfmgLvmlbDmja5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0U3VtbWFyeSh0eXBlOiBtYWluVHlwZXxzdHJpbmcscGFnZTphbnksIHNpemU6YW55KSB7XHJcbiAgICBsZXQgdHlwZW51bWJlciA9IHRoaXMudHlwZUhhbmRsZSh0eXBlKVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cCgnL2JhY2tlbmQveGN4L3F1ZXN0aW9uUmFua2luZycsICdHRVQnLCB7IGRhdGE6IHsgdHlwZTogdHlwZW51bWJlciwgcGFnZTogcGFnZSwgcGFnZVNpemU6IHNpemUgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJlY3RpZmljYXRpb25cclxuICAgKiDpl67popjliIbmnpAt6Zeu6aKY5rGH5oC7XHJcbiAgICovXHJcbiAgcHVibGljIHJlY3RpZmljYXRpb24odHlwZTogbWFpblR5cGV8c3RyaW5nKSB7XHJcbiAgICBsZXQgdHlwZW51bWJlciA9IHRoaXMudHlwZUhhbmRsZSh0eXBlKVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cCgnL2JhY2tlbmQveGN4L3JlY3RpZmljYXRpb24nLCAnR0VUJywgeyBkYXRhOiB7IHR5cGU6IHR5cGVudW1iZXIgfSB9LCAnYXV0aG9yaXR5JylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFJhdGVcclxuICAgKiDpl67popjliIbmnpAt6L6+5qCH546HXHJcbiAgICovXHJcbiAgcHVibGljIGdldFJhdGUodHlwZTogbWFpblR5cGV8c3RyaW5nKSB7XHJcbiAgICBsZXQgdHlwZW51bWJlciA9IHRoaXMudHlwZUhhbmRsZSh0eXBlKVxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cCgnL2JhY2tlbmQveGN4L3lpZWxkJywgJ0dFVCcsIHsgZGF0YTogeyB0eXBlOiB0eXBlbnVtYmVyIH0gfSwgJ2F1dGhvcml0eScpXHJcbiAgfVxyXG59XHJcbmNvbnN0IGFwaSA9IG5ldyBBUElcclxuZXhwb3J0IGRlZmF1bHQgYXBpXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgYXBpOyJdfQ==