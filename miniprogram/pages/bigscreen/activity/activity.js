"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const net_service_1 = require("../../../service/net.service");
;
const app = getApp();
Page({
    data: {
        loading: true,
        username: '',
        password: '',
        updata: {
            activity_type: '',
            title: '',
            content: '',
            start_time: '选择日期',
            image_url: []
        }
    },
    inputform(e) {
        let key = e.currentTarget.dataset.key;
        let updata = this.data.updata;
        updata[key] = e.detail.currentKey || e.detail.value;
        this.setData({
            updata: updata
        });
        console.log(this.data.updata);
    },
    onRemoveImgTap(e) {
        let images = e.detail.all;
        let updata = this.data.updata;
        updata.image_url = images;
        this.setData({
            updata: updata
        });
    },
    onImgChangeTap(e) {
        let images = e.detail.current;
        let image_url = this.data.updata.image_url;
        let updata = this.data.updata;
        net_service_1.default.uploadImgs(images).then((res) => {
            image_url = [...image_url, ...res];
            updata.image_url = image_url;
            this.setData({
                updata: updata,
            });
            console.log(this.data.updata);
        }, (err) => {
            updata.image_url = image_url;
            this.setData({
                updata: updata,
            });
        });
    },
    check() {
        let flag = true;
        Object.keys(this.data.updata).forEach((k) => {
            if (!this.data.updata[k]) {
                flag = false;
            }
        });
        return flag;
    },
    submit(event) {
        if (this.check()) {
            net_service_1.default.newActivity(this.data.updata).then(res => {
                console.log(res);
                wx.navigateBack();
            });
            console.log('哈哈哈哈');
        }
        else {
            wx.showToast({
                title: '请完善表单',
                icon: 'none',
                duration: 2000
            });
        }
    },
    reset() {
        this.setData({
            user: {
                username: '',
                password: '',
            }
        });
    },
    onLoad() {
        wx.lin.initValidateForm(this);
    },
    onReady() {
    },
    onShow() {
    },
    onHide() {
    },
    onUnload() {
    },
    onPullDownRefresh() {
    },
    onReachBottom() {
    },
    onShareAppMessage(opts) {
        console.log(opts.target);
        return {};
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aXZpdHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhY3Rpdml0eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhEQUErQztBQUMvQyxDQUFDO0FBQ0QsTUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFFLENBQUM7QUFDckIsSUFBSSxDQUFDO0lBS0gsSUFBSSxFQUFFO1FBQ0osT0FBTyxFQUFFLElBQUk7UUFDYixRQUFRLEVBQUUsRUFBRTtRQUNaLFFBQVEsRUFBRSxFQUFFO1FBQ1osTUFBTSxFQUFPO1lBQ1gsYUFBYSxFQUFFLEVBQUU7WUFDakIsS0FBSyxFQUFFLEVBQUU7WUFDVCxPQUFPLEVBQUUsRUFBRTtZQUNYLFVBQVUsRUFBRSxNQUFNO1lBQ2xCLFNBQVMsRUFBRSxFQUFFO1NBQ2Q7S0FDRjtJQUtELFNBQVMsQ0FBQyxDQUFNO1FBRWQsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ3RDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFBO1FBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQTtRQUNuRCxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsTUFBTSxFQUFFLE1BQU07U0FDZixDQUFDLENBQUE7UUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFnQi9CLENBQUM7SUFDRCxjQUFjLENBQUMsQ0FBTTtRQUNuQixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQTtRQUN6QixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQTtRQUM3QixNQUFNLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQTtRQUN6QixJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsTUFBTSxFQUFFLE1BQU07U0FDZixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsY0FBYyxDQUFDLENBQU07UUFDbkIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUE7UUFDN0IsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFBO1FBQzFDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFBO1FBQzdCLHFCQUFHLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQVEsRUFBRSxFQUFFO1lBQ3ZDLFNBQVMsR0FBRyxDQUFDLEdBQUcsU0FBUyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUE7WUFDbEMsTUFBTSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUE7WUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDWCxNQUFNLEVBQUUsTUFBTTthQUNmLENBQUMsQ0FBQTtZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUMvQixDQUFDLEVBQUUsQ0FBQyxHQUFRLEVBQUUsRUFBRTtZQUNkLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1lBQzVCLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1gsTUFBTSxFQUFFLE1BQU07YUFDZixDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQTtJQUVKLENBQUM7SUFDRCxLQUFLO1FBQ0gsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDeEIsSUFBSSxHQUFHLEtBQUssQ0FBQTthQUNiO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFDRixPQUFPLElBQUksQ0FBQTtJQUNiLENBQUM7SUFDRCxNQUFNLENBQUMsS0FBVTtRQUNmLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBRWhCLHFCQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQSxFQUFFO2dCQUMxQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO2dCQUNoQixFQUFFLENBQUMsWUFBWSxFQUFFLENBQUE7WUFDbkIsQ0FBQyxDQUFDLENBQUE7WUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1NBQ3BCO2FBQU07WUFDTCxFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNYLEtBQUssRUFBRSxPQUFPO2dCQUNkLElBQUksRUFBRSxNQUFNO2dCQUNaLFFBQVEsRUFBRSxJQUFJO2FBQ2YsQ0FBQyxDQUFBO1NBQ0g7SUFDSCxDQUFDO0lBQ0QsS0FBSztRQUNILElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxJQUFJLEVBQUU7Z0JBQ0osUUFBUSxFQUFFLEVBQUU7Z0JBQ1osUUFBUSxFQUFFLEVBQUU7YUFDYjtTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFJRCxNQUFNO1FBQ0osRUFBRSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUkvQixDQUFDO0lBS0QsT0FBTztJQUVQLENBQUM7SUFLRCxNQUFNO0lBRU4sQ0FBQztJQUtELE1BQU07SUFFTixDQUFDO0lBS0QsUUFBUTtJQUVSLENBQUM7SUFLRCxpQkFBaUI7SUFFakIsQ0FBQztJQUtELGFBQWE7SUFFYixDQUFDO0lBS0QsaUJBQWlCLENBQUMsSUFBUztRQUN6QixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN4QixPQUFPLEVBQUUsQ0FBQTtJQUNYLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBpIGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvbmV0LnNlcnZpY2UnO1xyXG47XHJcbmNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG5QYWdlKHtcclxuXHJcbiAgLyoqXHJcbiAgICog6aG16Z2i55qE5Yid5aeL5pWw5o2uXHJcbiAgICovXHJcbiAgZGF0YToge1xyXG4gICAgbG9hZGluZzogdHJ1ZSxcclxuICAgIHVzZXJuYW1lOiAnJyxcclxuICAgIHBhc3N3b3JkOiAnJyxcclxuICAgIHVwZGF0YTogPGFueT57XHJcbiAgICAgIGFjdGl2aXR5X3R5cGU6ICcnLFxyXG4gICAgICB0aXRsZTogJycsXHJcbiAgICAgIGNvbnRlbnQ6ICcnLFxyXG4gICAgICBzdGFydF90aW1lOiAn6YCJ5oup5pel5pyfJyxcclxuICAgICAgaW1hZ2VfdXJsOiBbXVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgLy8gZ2V0VXNlckluZm8gKGU6YW55KSB7XHJcbiAgLy8gICBhcHAuZ2xvYmFsRGF0YS51c2VySW5mbyA9IGUuZGV0YWlsLnVzZXJJbmZvXHJcbiAgLy8gICAvLyB0aGlzLnN1Ym1pdCgpO1xyXG4gIC8vIH0sXHJcbiAgaW5wdXRmb3JtKGU6IGFueSkge1xyXG5cclxuICAgIGxldCBrZXkgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXk7XHJcbiAgICBsZXQgdXBkYXRhID0gdGhpcy5kYXRhLnVwZGF0YVxyXG4gICAgdXBkYXRhW2tleV0gPSBlLmRldGFpbC5jdXJyZW50S2V5IHx8IGUuZGV0YWlsLnZhbHVlXHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICB1cGRhdGE6IHVwZGF0YVxyXG4gICAgfSlcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YS51cGRhdGEpXHJcbiAgICAvLyBpZiAoa2V5ID09PSAndXNlcm5hbWUnKSB7XHJcbiAgICAvLyAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAvLyAgICAgdXNlcjp7XHJcbiAgICAvLyAgICAgICB1c2VybmFtZTogZS5kZXRhaWwudmFsdWUsXHJcbiAgICAvLyAgICAgICBwYXNzd29yZDogdGhpcy5kYXRhLnVwZGF0YS5wYXNzd29yZFxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgfSlcclxuICAgIC8vIH1lbHNle1xyXG4gICAgLy8gICB0aGlzLnNldERhdGEoe1xyXG4gICAgLy8gICAgIHVzZXI6e1xyXG4gICAgLy8gICAgICAgdXNlcm5hbWU6IHRoaXMuZGF0YS51cGRhdGEudXNlcm5hbWUsXHJcbiAgICAvLyAgICAgICBwYXNzd29yZDogZS5kZXRhaWwudmFsdWVcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgIH0pXHJcbiAgICAvLyB9XHJcbiAgfSxcclxuICBvblJlbW92ZUltZ1RhcChlOiBhbnkpIHtcclxuICAgIGxldCBpbWFnZXMgPSBlLmRldGFpbC5hbGxcclxuICAgIGxldCB1cGRhdGEgPSB0aGlzLmRhdGEudXBkYXRhXHJcbiAgICB1cGRhdGEuaW1hZ2VfdXJsID0gaW1hZ2VzXHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICB1cGRhdGE6IHVwZGF0YVxyXG4gICAgfSlcclxuICB9LFxyXG4gIG9uSW1nQ2hhbmdlVGFwKGU6IGFueSkge1xyXG4gICAgbGV0IGltYWdlcyA9IGUuZGV0YWlsLmN1cnJlbnRcclxuICAgIGxldCBpbWFnZV91cmwgPSB0aGlzLmRhdGEudXBkYXRhLmltYWdlX3VybFxyXG4gICAgbGV0IHVwZGF0YSA9IHRoaXMuZGF0YS51cGRhdGFcclxuICAgIGFwaS51cGxvYWRJbWdzKGltYWdlcykudGhlbigocmVzOiBhbnkpID0+IHtcclxuICAgICAgaW1hZ2VfdXJsID0gWy4uLmltYWdlX3VybCwgLi4ucmVzXVxyXG4gICAgICB1cGRhdGEuaW1hZ2VfdXJsID0gaW1hZ2VfdXJsXHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgdXBkYXRhOiB1cGRhdGEsXHJcbiAgICAgIH0pXHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YS51cGRhdGEpXHJcbiAgICB9LCAoZXJyOiBhbnkpID0+IHtcclxuICAgICAgdXBkYXRhLmltYWdlX3VybCA9IGltYWdlX3VybFxyXG4gICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgIHVwZGF0YTogdXBkYXRhLFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgfSxcclxuICBjaGVjaygpIHtcclxuICAgIGxldCBmbGFnID0gdHJ1ZVxyXG4gICAgT2JqZWN0LmtleXModGhpcy5kYXRhLnVwZGF0YSkuZm9yRWFjaCgoaykgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuZGF0YS51cGRhdGFba10pIHtcclxuICAgICAgICBmbGFnID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBmbGFnXHJcbiAgfSxcclxuICBzdWJtaXQoZXZlbnQ6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuY2hlY2soKSkge1xyXG4gICAgICAvLyDnlKjmiLflt7LmjojmnYPkuJTooajljZXpqozor4HmiJDlip9cclxuICAgICAgYXBpLm5ld0FjdGl2aXR5KHRoaXMuZGF0YS51cGRhdGEpLnRoZW4ocmVzPT57XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgIHd4Lm5hdmlnYXRlQmFjaygpXHJcbiAgICAgIH0pXHJcbiAgICAgIGNvbnNvbGUubG9nKCflk4jlk4jlk4jlk4gnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd3guc2hvd1RvYXN0KHtcclxuICAgICAgICB0aXRsZTogJ+ivt+WujOWWhOihqOWNlScsXHJcbiAgICAgICAgaWNvbjogJ25vbmUnLFxyXG4gICAgICAgIGR1cmF0aW9uOiAyMDAwXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfSxcclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIHVzZXI6IHtcclxuICAgICAgICB1c2VybmFtZTogJycsXHJcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliqDovb1cclxuICAgKi9cclxuICBvbkxvYWQoKSB7XHJcbiAgICB3eC5saW4uaW5pdFZhbGlkYXRlRm9ybSh0aGlzKVxyXG4gICAgLy8gaWYgKGFwcC5nbG9iYWxEYXRhLnRva2VuKSB7XHJcbiAgICAvLyAgIHd4Lm5hdmlnYXRlVG8oe3VybDonL3BhZ2VzL21haW4vcGF0cm9sL2luZGV4L2luZGV4J30pO1xyXG4gICAgLy8gfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yid5qyh5riy5p+T5a6M5oiQXHJcbiAgICovXHJcbiAgb25SZWFkeSgpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLmmL7npLpcclxuICAgKi9cclxuICBvblNob3coKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i6ZqQ6JePXHJcbiAgICovXHJcbiAgb25IaWRlKCkge1xyXG5cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWNuOi9vVxyXG4gICAqL1xyXG4gIG9uVW5sb2FkKCkge1xyXG5cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxyXG4gICAqL1xyXG4gIG9uUHVsbERvd25SZWZyZXNoKCkge1xyXG5cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDpobXpnaLkuIrmi4nop6blupXkuovku7bnmoTlpITnkIblh73mlbBcclxuICAgKi9cclxuICBvblJlYWNoQm90dG9tKCkge1xyXG5cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDnlKjmiLfngrnlh7vlj7PkuIrop5LliIbkuqtcclxuICAgKi9cclxuICBvblNoYXJlQXBwTWVzc2FnZShvcHRzOiBhbnkpOiBXZWNoYXRNaW5pcHJvZ3JhbS5QYWdlLklDdXN0b21TaGFyZUNvbnRlbnQge1xyXG4gICAgY29uc29sZS5sb2cob3B0cy50YXJnZXQpXHJcbiAgICByZXR1cm4ge31cclxuICB9XHJcbn0pIl19